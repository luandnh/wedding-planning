---
import AppLayout from '../layouts/AppLayout.astro';
import DashboardManager from '../components/DashboardManager.svelte';

// Chỉ cần lấy user và token để truyền vào component
const token = Astro.cookies.get('token')?.value;
const user = Astro.locals.user;
---

<AppLayout title="Tổng Quan">
    {user && token ? (
        <DashboardManager client:load {user} {token} />
    ) : (
        <p class="text-center text-red-500 py-8">Lỗi xác thực, vui lòng đăng nhập lại.</p>
    )}
</AppLayout>